# 快速开始指南

**💡 新手友好版本 - 每一步都有说明**

---

## 📋 第0步：检查电脑环境

在开始之前，确保你有：
- ✅ Python 3.9 或更高版本（不知道？打开命令行输入 `python --version`）
- ✅ 能上网的电脑（需要下载财报）
- ✅ 无需服务器，无需付费

---

## 🚀 第1步：安装程序

### 1.1 下载代码

如果你还没有代码，先从GitHub下载：

```bash
git clone https://github.com/aisong78/financial_report_scraper.git
cd financial_report_scraper
```

### 1.2 安装依赖包

**依赖包是什么？** 就是程序需要的其他小工具，像做菜需要的锅碗瓢盆。

```bash
pip install -r requirements.txt
```

这个命令会自动安装所有需要的包，大概需要1-2分钟。

**如果报错：**
- Windows: 试试 `pip3 install -r requirements.txt`
- Mac/Linux: 试试 `pip3 install -r requirements.txt` 或 `sudo pip3 install -r requirements.txt`

---

## 📝 第2步：配置文件（可选）

### A股和港股：跳过这一步！

不需要任何配置，直接能用。

### 美股：需要配置邮箱

如果你想下载美股财报（如苹果、特斯拉），需要设置邮箱：

**步骤：**

1. 复制配置文件模板：
```bash
cp config.json.example config.json
```

2. 打开 `config.json` 文件（用记事本、VSCode等），找到这一行：
```json
"user_email": "your.email@example.com"
```

3. 改成你的真实邮箱：
```json
"user_email": "zhangsan@gmail.com"
```

**为什么需要邮箱？** SEC（美国证券交易委员会）的规定，不是我们要的。

---

## 🎯 第3步：测试程序（推荐新手先做这步）

在开始使用前，先测试一下程序是否正常：

### 测试 Phase 0（下载功能）

```bash
python test_phase0.py
```

**期望结果：** 应该看到 `4/4 项测试通过`

### 测试 Phase 1（解析功能）

```bash
python test_phase1.py
```

**期望结果：** 应该看到 `5/5 项测试通过`

**如果测试失败：** 检查是否安装了所有依赖包（第1步）

---

## 📥 第4步：下载财报

现在你可以下载真实的财报了！

### 方法1：演示脚本（最简单，推荐）

```bash
python demo_download.py
```

运行后会看到菜单：

```
请选择要演示的市场：
  1. A股（如：贵州茅台 600519）
  2. 港股（如：腾讯控股 00700）
  3. 美股（如：苹果 AAPL）- 需要先配置邮箱
  4. 全部演示
  0. 退出
```

**新手推荐：** 先选 `1`，下载贵州茅台的财报试试。

### 方法2：在Python代码中使用

如果你会写Python，可以这样用：

```python
from src.scrapers import scrape_a_stock

# 下载贵州茅台最近365天的财报
files = scrape_a_stock("600519", lookback_days=365)
print(f"下载了 {len(files)} 份财报")

# files 是一个列表，包含所有下载的文件路径
for file in files:
    print(f"文件路径: {file}")
```

---

## 🔍 第5步：解析财报（Phase 1 新功能）

下载的财报是PDF或HTML文件，程序可以读懂它们并提取数字。

### 完整示例：

```python
from src.scrapers import scrape_a_stock
from src.parsers import PDFParser
from src.extractors import MetricExtractor
from datetime import datetime

# 1. 下载财报
print("正在下载财报...")
files = scrape_a_stock("600519", lookback_days=365)
print(f"下载了 {len(files)} 份财报")

# 2. 解析第一份财报
print(f"\n正在解析: {files[0]}")
parser = PDFParser()
parsed_data = parser.parse(files[0])

print("解析结果：")
print(f"  营业收入: {parsed_data['income_statement'].get('revenue')}")
print(f"  净利润: {parsed_data['income_statement'].get('net_profit')}")
print(f"  总资产: {parsed_data['balance_sheet'].get('total_assets')}")

# 3. 提取更多指标
extractor = MetricExtractor()
metrics = extractor.extract(
    parsed_data,
    stock_id=1,
    report_date=datetime(2024, 12, 31)
)

print(f"\n提取了 {len(metrics)} 个指标")
print(f"  毛利率: {metrics.get('gross_margin')}")
print(f"  净利率: {metrics.get('net_margin')}")
print(f"  ROE: {metrics.get('roe')}")
print(f"  资产负债率: {metrics.get('asset_liability_ratio')}")
```

**注意：** 这个功能比较高级，新手可以先跳过，等需要时再学。

---

## 📁 文件保存在哪里？

下载的财报会自动保存在：

```
financial_report_scraper/
├── reports/              # 财报文件
│   ├── A/               # A股财报（如 600519_年报.pdf）
│   ├── HK/              # 港股财报
│   └── US/              # 美股财报
├── data/                 # 数据库
│   └── database.db      # SQLite数据库（存储提取的数字）
└── logs/                 # 日志
    └── financial_scraper.log  # 运行日志（出错时看这里）
```

---

## ✅ 功能清单：现在能做什么？

| 功能 | Phase | 状态 | 说明 |
|------|-------|------|------|
| **下载A股财报** | 0 | ✅ 可用 | 从巨潮资讯下载 |
| **下载港股财报** | 0 | ✅ 可用 | 从巨潮资讯下载 |
| **下载美股财报** | 0 | ✅ 可用 | 从SEC下载，需配置邮箱 |
| **解析PDF财报** | 1 | ✅ 可用 | 自动识别三大报表 |
| **解析HTML财报** | 1 | ✅ 可用 | 支持SEC格式 |
| **提取46个指标** | 1 | ✅ 可用 | 包括营收、利润、ROE等 |
| **计算衍生指标** | 1 | ✅ 可用 | 增长率、比率、周转率 |
| **数据验证** | 1 | ✅ 可用 | 自动检查数据一致性 |
| **数据库存储** | 1 | ✅ 可用 | SQLite，支持历史查询 |
| **文件管理** | 1 | ✅ 可用 | 自动清理旧文件 |
| 分析公司好坏 | 2 | ⏳ 待开发 | Phase 2的工作 |
| 投资建议 | 2 | ⏳ 待开发 | 买入/持有/卖出 |
| 一键运行 | 2 | ⏳ 待开发 | CLI工具 |
| 自动追踪 | 3 | ⏳ 待开发 | 财报季提醒 |

---

## 🎓 新手指南

### 建议的学习路径：

1. **第一天：** 运行测试脚本，确保程序能用
   ```bash
   python test_phase0.py
   python test_phase1.py
   ```

2. **第二天：** 下载一份A股财报试试
   ```bash
   python demo_download.py  # 选1
   ```

3. **第三天：** 查看下载的文件
   - 打开 `reports/A/` 文件夹
   - 看看PDF长什么样

4. **第四天：** 尝试解析财报（如果会Python）
   - 按照"第5步"的示例代码试试

5. **第五天：** 等待 Phase 2 完成！

---

## 🐛 常见问题

### Q1: 运行测试时报错 "ModuleNotFoundError"
**A:** 你可能忘记安装依赖了，运行：
```bash
pip install -r requirements.txt
```

### Q2: 美股下载报403错误
**A:** 两个可能原因：
1. 没有配置邮箱 → 参考"第2步"配置
2. SEC网站限制 → 等几分钟再试

### Q3: 找不到 config.json 文件
**A:** 你需要先复制模板：
```bash
cp config.json.example config.json
```

### Q4: 解析财报时报错
**A:** 可能是：
1. PDF格式太特殊，程序读不懂 → 正常，不是所有PDF都能读
2. 缺少依赖包 → 重新运行 `pip install -r requirements.txt`

### Q5: 数据准确吗？
**A:** 程序会给出置信度评分：
- 90%以上 → 很准确
- 70-90% → 基本准确
- 70%以下 → 建议人工检查

### Q6: 数据存在哪里？
**A:** SQLite数据库，在 `data/database.db`
- 不用担心，这是本地文件，不会上传到网上
- 可以用 SQLite浏览器工具查看（如 DB Browser for SQLite）

### Q7: 会不会占用很多空间？
**A:** 不会！
- 程序会自动清理旧的PDF文件（只保留2期）
- 但所有的数字都保存在数据库里
- 100个股票大概占 10-20GB（如果保留2期PDF）

---

## 📞 需要帮助？

如果遇到问题：

1. **查看日志：**
   ```bash
   cat logs/financial_scraper.log
   ```

2. **运行测试：**
   ```bash
   python test_phase0.py
   python test_phase1.py
   ```

3. **查看文档：**
   - `Phase1完成总结.md` - Phase 1详细说明
   - `docs/` 文件夹 - 技术文档

4. **提问：** 在GitHub上提Issue

---

## 🚀 下一步：Phase 2

**Phase 2 会实现什么？**

1. **分析框架**
   - 价值投资（巴菲特风格）
   - 成长投资（彼得·林奇风格）

2. **一键分析**
   ```bash
   python analyze.py 600519  # 分析贵州茅台
   ```
   输出：
   ```
   股票：贵州茅台 (600519)
   评分：85分（优秀）
   建议：买入
   理由：ROE持续高于15%，毛利率90%，行业龙头...
   ```

3. **批量分析**
   ```bash
   python analyze.py --watchlist  # 分析所有自选股
   ```

4. **生成报告**
   - 自动生成PDF报告
   - 包含图表和分析说明

**预计完成时间：3-4天**

---

## 📚 推荐阅读

如果你想深入了解：

1. **产品规划：** `docs/01-产品规划/`
   - 需求分析.md
   - 产品架构设计.md
   - 分阶段实施计划.md

2. **技术文档：** `docs/02-技术文档/`
   - 财务指标体系.md（92个指标的详细说明）
   - Phase1实施计划.md（Phase 1的技术设计）

3. **测试脚本：**
   - `test_phase0.py` - Phase 0测试
   - `test_phase1.py` - Phase 1测试

---

**最后更新：2024年11月21日**
**当前版本：Phase 1.0 ✅**
**下一版本：Phase 2.0（开发中）⏳**

---

## 💡 给完全不懂代码的人

如果你完全不懂代码，也想用这个工具：

**现状：** 目前还需要一些代码知识才能用。

**建议：** 等 Phase 2 完成后，会有图形界面或简单的命令，到时候就很容易用了。

**预计时间：** 大概一周后。

**现在可以做的：**
1. Star这个项目（关注更新）
2. 学习一些Python基础（推荐：菜鸟教程）
3. 等待 Phase 2 完成的通知

---

**祝你使用愉快！📈**

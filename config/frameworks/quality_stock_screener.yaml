# 优质白马股筛选框架
# 基于用户需求：硬性门槛筛选，Pass/Fail结果

name: "优质白马股筛选框架"
description: "严格的硬性门槛筛选，寻找优质白马股"
type: "screening"  # 筛选型框架（区别于评分型）
version: "1.0"

# 筛选标准（所有条件必须满足）
categories:
  # 一、核心财务指标（硬性门槛）
  - name: "核心财务指标"
    description: "盈利能力、成长能力、分红能力"
    required: true  # 该分类下的所有条件必须满足

    criteria:
      # 1.1 盈利能力
      - name: "连续5年ROE > 15%"
        description: "净资产收益率持续优秀"
        check_type: "consecutive_years"
        metric: "roe"
        operator: ">"
        threshold: 0.15
        years: 5
        importance: "critical"  # 重要性：critical/high/medium/low

      - name: "连续5年毛利率 > 30%"
        description: "具备定价权和竞争优势"
        check_type: "consecutive_years"
        metric: "gross_margin"
        operator: ">"
        threshold: 0.30
        years: 5
        importance: "critical"

      # 1.2 成长能力
      - name: "最近季度营收增速 > 20%"
        description: "营收保持高增长"
        check_type: "latest_quarter"
        metric: "revenue_growth_rate_qoq"
        operator: ">"
        threshold: 0.20
        importance: "high"

      - name: "最近季度净利润增速 > 20%"
        description: "利润保持高增长"
        check_type: "latest_quarter"
        metric: "profit_growth_rate_qoq"
        operator: ">"
        threshold: 0.20
        importance: "high"

      - name: "5年净利润复合增长率 > 24%"
        description: "长期成长能力强"
        check_type: "cagr"
        metric: "net_profit"
        operator: ">"
        threshold: 0.24
        years: 5
        importance: "high"

      # 1.3 分红能力
      - name: "连续3年分红"
        description: "持续回报股东"
        check_type: "consecutive_years"
        metric: "dividend_paid"
        operator: ">"
        threshold: 0  # 分红金额 > 0
        years: 3
        importance: "medium"

      - name: "最近年度分红率 > 30%"
        description: "分红比例合理"
        check_type: "simple"
        metric: "dividend_payout_ratio"
        operator: ">"
        threshold: 0.30
        importance: "medium"

  # 二、估值与性价比
  - name: "估值与性价比"
    description: "市值规模、估值水平、成长性价比"
    required: true

    criteria:
      - name: "市值 > 100亿"
        description: "规模足够大，流动性好"
        check_type: "simple"
        metric: "market_cap"
        operator: ">"
        threshold: 10000000000  # 100亿（单位：元）
        importance: "high"

      - name: "市盈率 < 20倍"
        description: "估值合理，不过热"
        check_type: "simple"
        metric: "pe_ratio"
        operator: "<"
        threshold: 20
        importance: "high"

      - name: "PEG ≤ 1.5"
        description: "成长性价比高"
        check_type: "simple"
        metric: "peg_ratio"
        operator: "<="
        threshold: 1.5
        importance: "high"

      - name: "股息率 > 十年期国债收益率"
        description: "股息回报有吸引力"
        check_type: "compare_benchmark"
        metric: "dividend_yield"
        operator: ">"
        benchmark: "treasury_10y"  # 十年期国债收益率
        benchmark_value: 0.025  # 可配置，默认2.5%
        importance: "medium"

  # 三、风险控制体系
  - name: "风险控制"
    description: "负面筛选、ESG评级"
    required: true

    criteria:
      - name: "无重大违规历史"
        description: "过去5年无重大违规记录"
        check_type: "negative_screen"
        metric: "violations"
        operator: "=="
        threshold: 0
        years: 5
        importance: "critical"

      - name: "无财务造假历史"
        description: "过去5年无财务造假记录"
        check_type: "negative_screen"
        metric: "fraud"
        operator: "=="
        threshold: 0
        years: 5
        importance: "critical"

      - name: "ESG评级 ≥ BBB"
        description: "ESG评级达标（MSCI或Wind）"
        check_type: "rating"
        metric: "esg_rating"
        operator: ">="
        threshold: "BBB"
        importance: "medium"
        rating_scale: ["CCC", "B", "BB", "BBB", "A", "AA", "AAA"]

# 行业特定调整（可选）
industry_adjustments:
  # 不同行业可以有不同的门槛
  technology:
    name: "科技股"
    adjustments:
      - criterion: "毛利率"
        threshold: 0.40  # 科技股要求更高毛利率
      - criterion: "营收增速"
        threshold: 0.30  # 科技股要求更高增速

  finance:
    name: "金融股"
    adjustments:
      - criterion: "ROE"
        threshold: 0.12  # 金融股ROE标准可以适当降低
      - criterion: "毛利率"
        disabled: true  # 金融股不看毛利率

  manufacturing:
    name: "制造业"
    adjustments:
      - criterion: "毛利率"
        threshold: 0.25  # 制造业毛利率标准可以降低
      - criterion: "资产周转率"
        threshold: 1.0  # 制造业关注资产周转率
        operator: ">"

# 筛选结果定义
result_types:
  pass:
    label: "通过筛选"
    description: "满足所有硬性条件，值得深入研究"
    action: "✅ 加入备选池"

  fail:
    label: "未通过筛选"
    description: "存在不满足的条件"
    action: "❌ 暂不考虑"

  partial:
    label: "部分通过"
    description: "满足大部分条件，但有个别指标不达标"
    action: "⚠️ 谨慎关注"

# 容错设置（可选）
tolerance:
  allow_partial_pass: false  # 是否允许部分通过
  critical_must_pass: true  # 标记为critical的条件必须通过
  high_min_pass_rate: 0.8  # high重要性的条件至少80%通过
  medium_min_pass_rate: 0.6  # medium重要性的条件至少60%通过

# 输出格式
output:
  show_details: true  # 显示详细的通过/未通过原因
  show_suggestions: true  # 显示改进建议
  compare_with_benchmark: true  # 与基准对比
